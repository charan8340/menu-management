## Standard Operating Procedure for Developing a menu-management System for Guestara Internship task

## Objective

This SOP outlines the steps to develop a minimum admin system with categories, sub-categories, and items using Node.js and MySQL.

### Key Steps

¬†

**1. Define Database Structure** [0:14](https://loom.com/share/3069aaef284d4a828766de05ec832fb9?t=14)

(https://loom.com/i/de33573386e84b5aba459c1b8fa3e49c?workflows_screenshot=true)

- Develop three sub-modules: categories, sub-categories, and items.
- Establish a many-to-many relationship between modules: 
  - A category can have multiple sub-categories.
  - A sub-category can have multiple items.

¬†

**2. Choose Database Type** [0:40](https://loom.com/share/3069aaef284d4a828766de05ec832fb9?t=40)
(https://loom.com/i/d02e1a8d18eb4c9e95014477844ea36a?workflows_screenshot=true)

- Select MySQL as the database for the application.

¬†

**3. Create Database Schema** [0:49](https://loom.com/share/3069aaef284d4a828766de05ec832fb9?t=49)

(https://loom.com/i/c92c4e02d1fb47a5801169586461bf52?workflows_screenshot=true)

- Define the structure of the database: 
  - Categories table with a primary key (ID).
  - Sub-categories table with a foreign key referencing the categories table.
  - Items table with a foreign key referencing the sub-categories table.

¬†

**4. Set Up API Routes** [1:31](https://loom.com/share/3069aaef284d4a828766de05ec832fb9?t=91)

(https://loom.com/i/07dcc11904a14df296925a4b35ae31d9?workflows_screenshot=true)

- Create main API route: `API/category` to retrieve all categories.
- Implement specific routes to get sub-categories and items based on category ID.

¬†

**5. Implement Layered Architecture** [3:15](https://loom.com/share/3069aaef284d4a828766de05ec832fb9?t=195)

(https://loom.com/i/3e6887d760f24ae98e800c3e168dfff6?workflows_screenshot=true)

- Divide the code into three layers of abstraction: 
  - **Controller/Routes Layer**: Handles incoming requests (category routes, sub-category routes, item routes).
  - **Business Logic Layer**: Processes requests and interacts with the database.
  - **Database Layer**: Executes SQL queries.

¬†

**6. Handle Requests** [3:46](https://loom.com/share/3069aaef284d4a828766de05ec832fb9?t=226)

(https://loom.com/i/3fff7c33bfac49258917419cb3d207e0?workflows_screenshot=true)

- Ensure that requests to the API call the appropriate business logic methods based on the route.

¬†

**7. Define Database Functions** [4:05](https://loom.com/share/3069aaef284d4a828766de05ec832fb9?t=245)

(https://loom.com/i/ce4d15412582473aa6939f5bf8cb7f89?workflows_screenshot=true)

- Create SQL functions to interact with the database for CRUD operations.

¬†

**8. Map Objects for Node.js** [4:14](https://loom.com/share/3069aaef284d4a828766de05ec832fb9?t=254)

(https://loom.com/i/b4339d54fbf045fb90455799578a1647?workflows_screenshot=true)

- Use ORM (Object-Relational Mapping) to map database objects to Node.js objects for easier data manipulation.

### Cautionary Notes

- Ensure that foreign key relationships are correctly established to maintain data integrity.
- Validate all user inputs to prevent SQL injection attacks.

### Tips for Efficiency

- Use version control (e.g., Git) to track changes in your codebase.
- Regularly test API endpoints to ensure they function as expected.
- Document your code and API routes for future reference.

### Link to Loom

<https://loom.com/share/3069aaef284d4a828766de05ec832fb9>
Live Base URL working: https://gravely-inconsolable-liz.ngrok-free.dev/
Menu Management Backend ‚Äî Node.js + Express + MySQL

A backend application for managing menu hierarchy:
**Category ‚Üí SubCategory ‚Üí Items**


Features

‚úÖ Create / Update Categories
‚úÖ Create / Update Subcategories
‚úÖ Create / Update Items
‚úÖ Fetch Categories (names only)
‚úÖ Fetch Subcategories under Category
‚úÖ Fetch Items under Category/Subcategory
‚úÖ Search Items by ID or Name


### ‚úÖ 1. Clone Repository

git clone https://github.com/charan8340/menu-management.git
cd menu-management

### ‚úÖ 2. Install Dependencies

npm install


## üóÑÔ∏è 3. MySQL Setup

### 3.1 Create MySQL Database

Login to MySQL:

mysql -u root -p

Then create database:

CREATE DATABASE menu_management;

### 3.2 Create `.env` file in project root

DB_NAME=menu_management
DB_USER=root
DB_PASSWORD='origninal password of your mysql'
DB_HOST=localhost
PORT=3000

> Replace `your_mysql_password` with your actual MySQL password.

---

## üì¶ Install Required Node Modules

```bash
npm install express sequelize mysql2 dotenv
```


## ‚ñ∂Ô∏è Run Server

### With Node

```bash
node server.js
```

## üß™ Test APIs using Postman

### Base URL

```
http://localhost:3000/api
```

### Endpoints

| Method    | Endpoint                       | Description                            |
| --------- | ------------------------------ | -------------------------------------- |
| **POST**  | `/category`                    | Create Category                        |
| **GET**   | `/category`                    | Get all categories (id + name)         |
| **GET**   | `/category/:cid/sub_cat`       | Get subcategories under category       |
| **POST**  | `/subcategory`                 | Create Subcategory                     |
| **GET**   | `/category/:cid/sub_cat/:scid` | Get items under category + subcategory |
| **POST**  | `/items`                       | Create item                            |
| **GET**   | `/items/:search`               | Search item by id or name              |
| **PATCH** | `/items/:id`                   | Update item                            |


## ‚úÖ Notes

* Postman/API testing.
* Database auto-syncs tables using Sequelize.
* If DB schema errors occur in development, run once:

```js
syncDB({ force: true })
```

---

## üé• Deliverables

* ‚úÖ GitHub Repo
* ‚úÖ Working Code
* ‚úÖ Loom Video Demonstrating:

  * API calls in Postman
  * DB setup
  * Code walkthrough



